-- Léo Hub Ultimate v5 PT-BR - Mod Menu Roblox Delta
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Camera = workspace.CurrentCamera
local Workspace = game:GetService("Workspace")

-- Configurações do Menu
local MenuHabilitado = false
local MenuPosicao = Vector2.new(100, 100)
local MenuTamanho = Vector2.new(270, 400)
local PodeClicar = true
local mouseDown = false

-- Funções
local Funcoes = {
    Aimbot = false,
    ESP = false,
    PuxarInimigos = false,
    Mira = true,
    GodMode = false,
    WallHack = false,
    SuperVelocidade = false, -- Nova função de vantagem
    SuperPulo = false        -- Nova função de vantagem
}
local FOVAimbot = 50

-- Criação do menu
local function CriarMenu()
    local CaixaMenu = Drawing.new("Square")
    CaixaMenu.Position = MenuPosicao
    CaixaMenu.Size = MenuTamanho
    CaixaMenu.Filled = true
    CaixaMenu.Color = Color3.fromRGB(25,25,25)
    CaixaMenu.Transparency = 1
    CaixaMenu.Visible = MenuHabilitado

    local Titulo = Drawing.new("Text")
    Titulo.Text = "Léo Hub Ultimate v5"
    Titulo.Position = MenuPosicao + Vector2.new(10,10)
    Titulo.Size = 22
    Titulo.Color = Color3.fromRGB(0,255,255)
    Titulo.Visible = MenuHabilitado

    local Fechar1 = Drawing.new("Line")
    local Fechar2 = Drawing.new("Line")
    local FecharOffset = Vector2.new(MenuTamanho.X-25,15)
    Fechar1.Color = Color3.fromRGB(255,0,0)
    Fechar2.Color = Color3.fromRGB(255,0,0)
    Fechar1.Thickness = 2
    Fechar2.Thickness = 2
    Fechar1.Visible = MenuHabilitado
    Fechar2.Visible = MenuHabilitado

    return {CaixaMenu=CaixaMenu, Titulo=Titulo, Fechar1=Fechar1, Fechar2=Fechar2, FecharOffset=FecharOffset}
end
local menu = CriarMenu()

-- Bolinha flutuante fixa
local BotaoMenu = Drawing.new("Circle")
BotaoMenu.Position = Vector2.new(50,50)
BotaoMenu.Radius = 18
BotaoMenu.Filled = true
BotaoMenu.Color = Color3.fromRGB(0,255,255)
BotaoMenu.Visible = true

-- Crosshair
local Mira = Drawing.new("Line")
Mira.Color = Color3.fromRGB(0,255,0)
Mira.Thickness = 2
Mira.Visible = Funcoes.Mira

-- Linhas ESP
local LinhasESP = {}
for _,player in pairs(Players:GetPlayers()) do
    if player ~= LocalPlayer then
        local linha = Drawing.new("Line")
        linha.Color = Color3.fromRGB(255,0,0)
        linha.Thickness = 2
        linha.Visible = false
        LinhasESP[player] = linha
    end
end

Players.PlayerAdded:Connect(function(player)
    if player ~= LocalPlayer then
        local linha = Drawing.new("Line")
        linha.Color = Color3.fromRGB(255,0,0)
        linha.Thickness = 2
        linha.Visible = false
        LinhasESP[player] = linha
    end
end)
Players.PlayerRemoving:Connect(function(player)
    if LinhasESP[player] then
        LinhasESP[player]:Remove()
        LinhasESP[player] = nil
    end
end)

-- Funções auxiliares
local function InimigoMaisProximo()
    local maisProximo = nil
    local menorDistancia = FOVAimbot
    for _,player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            local posTela, onScreen = Camera:WorldToViewportPoint(player.Character.HumanoidRootPart.Position)
            if onScreen then
                local dist = (Vector2.new(Camera.ViewportSize.X/2,Camera.ViewportSize.Y/2)-Vector2.new(posTela.X,posTela.Y)).magnitude
                if dist < menorDistancia then
                    menorDistancia = dist
                    maisProximo = player
                end
            end
        end
    end
    return maisProximo
end

local function PuxarInimigos(distancia)
    distancia = distancia or 10
    local char = LocalPlayer.Character
    if not char or not char:FindFirstChild("HumanoidRootPart") then return end
    local frente = char.HumanoidRootPart.Position + (char.HumanoidRootPart.CFrame.LookVector*distancia)
    for _,player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            player.Character.HumanoidRootPart.CFrame = CFrame.new(frente)
        end
    end
end

local function AtivarGodMode()
    local char = LocalPlayer.Character
    if char and char:FindFirstChild("Humanoid") then
        char.Humanoid.MaxHealth = math.huge
        char.Humanoid.Health = math.huge
    end
end

local function AtivarWallHack()
    for _, parte in pairs(Workspace:GetDescendants()) do
        if parte:IsA("BasePart") and parte.CanCollide == true then
            parte.Transparency = 0.5
            parte.CastShadow = false
        end
    end
end

local function AtivarSuperVelocidade()
    local char = LocalPlayer.Character
    if char and char:FindFirstChild("Humanoid") then
        char.Humanoid.WalkSpeed = 150 -- Velocidade muito alta
    end
end

local function AtivarSuperPulo()
    local char = LocalPlayer.Character
    if char and char:FindFirstChild("Humanoid") then
        char.Humanoid.JumpPower = 150 -- Pulo muito alto
    end
end

-- Abrir menu com INSERT
UserInputService.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.Keyboard then
        if input.KeyCode == Enum.KeyCode.Insert then
            MenuHabilitado = not MenuHabilitado
            menu.CaixaMenu.Visible = MenuHabilitado
            menu.Titulo.Visible = MenuHabilitado
            menu.Fechar1.Visible = MenuHabilitado
            menu.Fechar2.Visible = MenuHabilitado
        end
    end
end)

-- Clicar na bolinha para abrir menu
UserInputService.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        local mousePos = Vector2.new(UserInputService:GetMouseLocation().X, UserInputService:GetMouseLocation().Y)
        if (BotaoMenu.Position - mousePos).magnitude <= BotaoMenu.Radius and PodeClicar then
            MenuHabilitado = not MenuHabilitado
            menu.CaixaMenu.Visible = MenuHabilitado
            menu.Titulo.Visible = MenuHabilitado
            menu.Fechar1.Visible = MenuHabilitado
            menu.Fechar2.Visible = MenuHabilitado
            PodeClicar = false
            task.delay(0.2,function() PodeClicar = true end)
        end
    end
end)

-- Loop principal
RunService.RenderStepped:Connect(function()
    local mousePos = Vector2.new(UserInputService:GetMouseLocation().X, UserInputService:GetMouseLocation().Y)

    -- Fechar menu X
    menu.Fechar1.From = MenuPosicao + menu.FecharOffset
    menu.Fechar1.To = menu.Fechar1.From + Vector2.new(12,12)
    menu.Fechar2.From = menu.Fechar1.From + Vector2.new(0,12)
    menu.Fechar2.To = menu.Fechar1.From + Vector2.new(12,0)
    if MenuHabilitado and mouseDown and PodeClicar then
        local centroX = menu.Fechar1.From + Vector2.new(6,6)
        if (centroX - mousePos).magnitude <= 12 then
            MenuHabilitado = false
            menu.CaixaMenu.Visible = false
            menu.Titulo.Visible = false
            menu.Fechar1.Visible = false
            menu.Fechar2.Visible = false
            PodeClicar = false
            task.delay(0.2,function() PodeClicar = true end)
        end
    end

    -- Crosshair fixo
    if Funcoes.Mira then
        Mira.Visible = true
        local cx,cy = Camera.ViewportSize.X/2, Camera.ViewportSize.Y/2
        Mira.From = Vector2.new(cx-6,cy)
        Mira.To = Vector2.new(cx+6,cy)
    else
        Mira.Visible = false
    end

    -- Aimbot
    if Funcoes.Aimbot and mouseDown then
        local alvo = InimigoMaisProximo()
        if alvo then
            local posAlvo = alvo.Character.HumanoidRootPart.Position
            Camera.CFrame = Camera.CFrame:Lerp(CFrame.new(Camera.CFrame.Position,posAlvo),0.3)
        end
    end

    -- ESP
    if Funcoes.ESP then
        for player,linha in pairs(LinhasESP) do
            if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                local pos = Camera:WorldToViewportPoint(player.Character.HumanoidRootPart.Position)
                linha.From = Vector2.new(Camera.ViewportSize.X/2,Camera.ViewportSize.Y)
                linha.To = Vector2.new(pos.X,pos.Y)
                linha.Visible = true
            else
                linha.Visible = false
            end
        end
    else
        for _,linha in pairs(LinhasESP) do linha.Visible=false end
    end

    -- Puxar inimigos
    if Funcoes.PuxarInimigos then PuxarInimigos(15) end

    -- God Mode
    if Funcoes.GodMode then AtivarGodMode() end

    -- Wall Hack
    if Funcoes.WallHack then AtivarWallHack() end

    -- Super Velocidade
    if Funcoes.SuperVelocidade then AtivarSuperVelocidade() end

    -- Super Pulo
    if Funcoes.SuperPulo then AtivarSuperPulo() end

    -- Toggles do Menu
    if MenuHabilitado and mouseDown and PodeClicar then
        local startY = 50
        for nome,estado in pairs(Funcoes) do
            local togglePos = MenuPosicao + Vector2.new(20,startY)
            if (togglePos - mousePos).magnitude <= 50 then
                Funcoes[nome] = not estado
                PodeClicar = false
                task.delay(0.2,function() PodeClicar = true end)
            end
            startY = startY + 30
        end
    end
end)
